<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://devin0x01.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://devin0x01.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://devin0x01.github.io/css/github.min.css' />
    <link rel="stylesheet" href='https://devin0x01.github.io/css/github-style.css' />
    <link rel="stylesheet" href='https://devin0x01.github.io/css/light.css' />
    <link rel="stylesheet" href='https://devin0x01.github.io/css/dark.css' />
    <link rel="stylesheet" href='https://devin0x01.github.io/css/syntax.css' />
    <title>expect实现交互式输入 - DEVIN 0x01</title>
    
    <link rel="icon" type="image/x-icon" href='https://devin0x01.github.io/images/favicon.ico'>
    
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="1.常用命令 选项： -c:执行脚本前先执行的命令，可多次使用。 -d:debug模式，可以在运行时输出一些诊断信息，与在脚本开始处使用exp_internal 1相似。 -D:启用交换调式器,可设一整数参数。 -f:从文件读取命令，仅用于使用#!时。如果文件名为&amp;quot;-&amp;quot;，则从stdin读取(使用&amp;quot;./-&amp;ldquo;从文件名为-的文件读取)。 -i:交互式输入命令，使用&amp;quot;exit&amp;quot;或&amp;quot;EOF&amp;quot;退出输入状态。 &amp;ndash;:标示选项结束(如果你需要传递与expect选项相似的参数给脚本时)，可放到#!行:#!/usr/bin/expect &amp;ndash;。 -v:显示expect版本信息。
# 命令行参数 # $argv，参数数组，使用[lindex $argv n]获取，$argv 0为脚本名字 # $argc，参数个数 set username [lindex $argv 1] # 获取第1个参数 set passwd [lindex $argv 2] # 获取第2个参数 set timeout 30 # 设置超时 # spawn是expect内部命令，开启ssh连接 spawn ssh -l username 192.168.1.1 # 判断上次输出结果里是否包含“password:”的字符串，如果有则立即返回，否则就等待一段时间(timeout)后返回 expect &amp;#34;password:&amp;#34; # 发送内容ispass(密码、命令等) send &amp;#34;ispass\r&amp;#34; # 发送内容给用户 send_user &amp;#34;$argv0 [lrange $argv 0 2]\n&amp;#34; send_user &amp;#34;It&amp;#39;s OK\r&amp;#34; # 执行完成后保持交互状态，控制权交给控制台(手工操作)。否则会完成后会退出。 interact 2.例子 2.1自动telnet会话 #!" />
<meta name="keywords"
  content='' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://devin0x01.github.io/post/expect%E5%AE%9E%E7%8E%B0%E4%BA%A4%E4%BA%92%E5%BC%8F%E8%BE%93%E5%85%A5/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="expect实现交互式输入 - DEVIN 0x01" />
<meta name="twitter:description"
  content="1.常用命令 选项： -c:执行脚本前先执行的命令，可多次使用。 -d:debug模式，可以在运行时输出一些诊断信息，与在脚本开始处使用exp_internal 1相似。 -D:启用交换调式器,可设一整数参数。 -f:从文件读取命令，仅用于使用#!时。如果文件名为&amp;quot;-&amp;quot;，则从stdin读取(使用&amp;quot;./-&amp;ldquo;从文件名为-的文件读取)。 -i:交互式输入命令，使用&amp;quot;exit&amp;quot;或&amp;quot;EOF&amp;quot;退出输入状态。 &amp;ndash;:标示选项结束(如果你需要传递与expect选项相似的参数给脚本时)，可放到#!行:#!/usr/bin/expect &amp;ndash;。 -v:显示expect版本信息。
# 命令行参数 # $argv，参数数组，使用[lindex $argv n]获取，$argv 0为脚本名字 # $argc，参数个数 set username [lindex $argv 1] # 获取第1个参数 set passwd [lindex $argv 2] # 获取第2个参数 set timeout 30 # 设置超时 # spawn是expect内部命令，开启ssh连接 spawn ssh -l username 192.168.1.1 # 判断上次输出结果里是否包含“password:”的字符串，如果有则立即返回，否则就等待一段时间(timeout)后返回 expect &amp;#34;password:&amp;#34; # 发送内容ispass(密码、命令等) send &amp;#34;ispass\r&amp;#34; # 发送内容给用户 send_user &amp;#34;$argv0 [lrange $argv 0 2]\n&amp;#34; send_user &amp;#34;It&amp;#39;s OK\r&amp;#34; # 执行完成后保持交互状态，控制权交给控制台(手工操作)。否则会完成后会退出。 interact 2.例子 2.1自动telnet会话 #!" />
<meta name="twitter:site" content="https://devin0x01.github.io" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://devin0x01.github.io">


<meta property="og:type" content="article" />
<meta property="og:title" content="expect实现交互式输入 - DEVIN 0x01">
<meta property="og:description"
  content="1.常用命令 选项： -c:执行脚本前先执行的命令，可多次使用。 -d:debug模式，可以在运行时输出一些诊断信息，与在脚本开始处使用exp_internal 1相似。 -D:启用交换调式器,可设一整数参数。 -f:从文件读取命令，仅用于使用#!时。如果文件名为&amp;quot;-&amp;quot;，则从stdin读取(使用&amp;quot;./-&amp;ldquo;从文件名为-的文件读取)。 -i:交互式输入命令，使用&amp;quot;exit&amp;quot;或&amp;quot;EOF&amp;quot;退出输入状态。 &amp;ndash;:标示选项结束(如果你需要传递与expect选项相似的参数给脚本时)，可放到#!行:#!/usr/bin/expect &amp;ndash;。 -v:显示expect版本信息。
# 命令行参数 # $argv，参数数组，使用[lindex $argv n]获取，$argv 0为脚本名字 # $argc，参数个数 set username [lindex $argv 1] # 获取第1个参数 set passwd [lindex $argv 2] # 获取第2个参数 set timeout 30 # 设置超时 # spawn是expect内部命令，开启ssh连接 spawn ssh -l username 192.168.1.1 # 判断上次输出结果里是否包含“password:”的字符串，如果有则立即返回，否则就等待一段时间(timeout)后返回 expect &amp;#34;password:&amp;#34; # 发送内容ispass(密码、命令等) send &amp;#34;ispass\r&amp;#34; # 发送内容给用户 send_user &amp;#34;$argv0 [lrange $argv 0 2]\n&amp;#34; send_user &amp;#34;It&amp;#39;s OK\r&amp;#34; # 执行完成后保持交互状态，控制权交给控制台(手工操作)。否则会完成后会退出。 interact 2.例子 2.1自动telnet会话 #!" />
<meta property="og:url" content="https://devin0x01.github.io/post/expect%E5%AE%9E%E7%8E%B0%E4%BA%A4%E4%BA%92%E5%BC%8F%E8%BE%93%E5%85%A5/" />
<meta property="og:site_name" content="expect实现交互式输入" />
<meta property="og:image"
  content="https://devin0x01.github.io">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2023-06-18 14:05:25 &#43;0800 &#43;0800" />










</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://devin0x01.github.io">
        <svg class="octicon" height="32" viewBox="0 0 16 16" version="1.1" width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd"
            d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:https://devin0x01.github.io">
            </label>
          </form>
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://devin0x01.github.io">
        <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
          width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>
  
<div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://devin0x01.github.io">
                  <img class=" avatar-user"
                    src="https://devin0x01.github.io/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://devin0x01.github.io"></a></span><span
                    class="path-divider">/</span><strong class="css-truncate-target mr-1" style="max-width: 410px"><a
                      href="https://devin0x01.github.io/post/expect%E5%AE%9E%E7%8E%B0%E4%BA%A4%E4%BA%92%E5%BC%8F%E8%BE%93%E5%85%A5/">expect实现交互式输入</a></strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Sun, 18 Jun 2023 14:05:25 &#43;0800"
                    class="no-wrap">
                    Sun, 18 Jun 2023 14:05:25 &#43;0800</relative-time>

                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      945 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><h1 id="1常用命令">1.常用命令</h1>
<blockquote>
<p>选项：
-c:执行脚本前先执行的命令，可多次使用。
-d:debug模式，可以在运行时输出一些诊断信息，与在脚本开始处使用exp_internal 1相似。
-D:启用交换调式器,可设一整数参数。
-f:从文件读取命令，仅用于使用#!时。如果文件名为&quot;-&quot;，则从stdin读取(使用&quot;./-&ldquo;从文件名为-的文件读取)。
-i:交互式输入命令，使用&quot;exit&quot;或&quot;EOF&quot;退出输入状态。
&ndash;:标示选项结束(如果你需要传递与expect选项相似的参数给脚本时)，可放到#!行:#!/usr/bin/expect &ndash;。
-v:显示expect版本信息。</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 命令行参数 </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># $argv，参数数组，使用[lindex $argv n]获取，$argv 0为脚本名字</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># $argc，参数个数</span>
</span></span><span style="display:flex;"><span>set username <span style="color:#f92672">[</span>lindex $argv 1<span style="color:#f92672">]</span>  <span style="color:#75715e"># 获取第1个参数</span>
</span></span><span style="display:flex;"><span>set passwd <span style="color:#f92672">[</span>lindex $argv 2<span style="color:#f92672">]</span>    <span style="color:#75715e"># 获取第2个参数</span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>set timeout <span style="color:#ae81ff">30</span> <span style="color:#75715e"># 设置超时</span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># spawn是expect内部命令，开启ssh连接</span>
</span></span><span style="display:flex;"><span>spawn ssh -l username 192.168.1.1
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 判断上次输出结果里是否包含“password:”的字符串，如果有则立即返回，否则就等待一段时间(timeout)后返回</span>
</span></span><span style="display:flex;"><span>expect <span style="color:#e6db74">&#34;password:&#34;</span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 发送内容ispass(密码、命令等)</span>
</span></span><span style="display:flex;"><span>send <span style="color:#e6db74">&#34;ispass\r&#34;</span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 发送内容给用户</span>
</span></span><span style="display:flex;"><span>send_user <span style="color:#e6db74">&#34;</span>$argv0<span style="color:#e6db74"> [lrange </span>$argv<span style="color:#e6db74"> 0 2]\n&#34;</span>
</span></span><span style="display:flex;"><span>send_user <span style="color:#e6db74">&#34;It&#39;s OK\r&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 执行完成后保持交互状态，控制权交给控制台(手工操作)。否则会完成后会退出。</span>
</span></span><span style="display:flex;"><span>interact
</span></span></code></pre></div><h1 id="2例子">2.例子</h1>
<h2 id="21自动telnet会话">2.1自动telnet会话</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#!/usr/bin/expect -f
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>set ip <span style="color:#f92672">[</span>lindex $argv <span style="color:#ae81ff">0</span> <span style="color:#f92672">]</span>         <span style="color:#75715e"># 接收第1个参数,作为IP</span>
</span></span><span style="display:flex;"><span>set userid <span style="color:#f92672">[</span>lindex $argv <span style="color:#ae81ff">1</span> <span style="color:#f92672">]</span>     <span style="color:#75715e"># 接收第2个参数,作为userid</span>
</span></span><span style="display:flex;"><span>set mypassword <span style="color:#f92672">[</span>lindex $argv <span style="color:#ae81ff">2</span> <span style="color:#f92672">]</span> <span style="color:#75715e"># 接收第3个参数,作为密码</span>
</span></span><span style="display:flex;"><span>set mycommand <span style="color:#f92672">[</span>lindex $argv <span style="color:#ae81ff">3</span> <span style="color:#f92672">]</span>  <span style="color:#75715e"># 接收第4个参数，作为命令</span>
</span></span><span style="display:flex;"><span>set timeout <span style="color:#ae81ff">10</span>                   <span style="color:#75715e"># 设置超时时间</span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 向远程服务器请求打开一个telnet会话，并等待服务器询问用户名</span>
</span></span><span style="display:flex;"><span>spawn telnet $ip
</span></span><span style="display:flex;"><span>    expect <span style="color:#e6db74">&#34;username:&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 输入用户名，并等待服务器询问密码</span>
</span></span><span style="display:flex;"><span>    send <span style="color:#e6db74">&#34;</span>$userid<span style="color:#e6db74">\r&#34;</span>
</span></span><span style="display:flex;"><span>    expect <span style="color:#e6db74">&#34;password:&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 输入密码，并等待键入需要运行的命令</span>
</span></span><span style="display:flex;"><span>    send <span style="color:#e6db74">&#34;</span>$mypassword<span style="color:#e6db74">\r&#34;</span>
</span></span><span style="display:flex;"><span>    expect <span style="color:#e6db74">&#34;%&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 输入预先定好的密码，等待运行结果</span>
</span></span><span style="display:flex;"><span>    send <span style="color:#e6db74">&#34;</span>$mycommand<span style="color:#e6db74">\r&#34;</span>
</span></span><span style="display:flex;"><span>    expect <span style="color:#e6db74">&#34;%&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 将运行结果存入到变量中，显示出来或者写到磁盘中</span>
</span></span><span style="display:flex;"><span>    set results $expect_out<span style="color:#f92672">(</span>buffer<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 退出telnet会话，等待服务器的退出提示EOF</span>
</span></span><span style="display:flex;"><span>    send <span style="color:#e6db74">&#34;exit\r&#34;</span>
</span></span><span style="display:flex;"><span>    expect eof
</span></span></code></pre></div><h2 id="22其他">2.2其他</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#!/usr/bin/expect
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>expect <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;Are you sure you want to continue connecting (yes/no)?&#34;</span> <span style="color:#f92672">{</span>send <span style="color:#e6db74">&#34;yes\r&#34;</span>; exp_continue<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Password&#34;</span> <span style="color:#f92672">{</span>send <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>PWD<span style="color:#e6db74">}</span><span style="color:#e6db74">\r&#34;</span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>expect <span style="color:#e6db74">&#34;sftp&gt;&#34;</span> <span style="color:#f92672">{</span>send <span style="color:#e6db74">&#34;get /home/tools/123.zip\r&#34;</span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>expect <span style="color:#e6db74">&#34;sftp&gt;&#34;</span> <span style="color:#f92672">{</span>send <span style="color:#e6db74">&#34;quit\r&#34;</span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>expect eof
</span></span><span style="display:flex;"><span>EOF
</span></span></code></pre></div><h1 id="参考文献">参考文献</h1>
<ol>
<li>expect - 自动交互脚本：<a href="https://xstarcd.github.io/wiki/shell/expect.html">https://xstarcd.github.io/wiki/shell/expect.html</a></li>
</ol>
</article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='https://devin0x01.github.io/js/toc.js'></script>
<link rel="stylesheet" href='https://devin0x01.github.io/css/toc.css' />


  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://devin0x01.github.io">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://devin0x01.github.io/js/github-style.js"></script>




</html>