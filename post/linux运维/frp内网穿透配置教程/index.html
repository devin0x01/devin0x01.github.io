<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://devin0x01.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://devin0x01.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://devin0x01.github.io/css/github.min.css' />
    <link rel="stylesheet" href='https://devin0x01.github.io/css/github-style.css' />
    <link rel="stylesheet" href='https://devin0x01.github.io/css/light.css' />
    <link rel="stylesheet" href='https://devin0x01.github.io/css/dark.css' />
    <link rel="stylesheet" href='https://devin0x01.github.io/css/syntax.css' />
    <title>frp内网穿透配置教程 - DEVIN&#39;s BLOG</title>
    
    <link rel="icon" type="image/x-icon" href='/images/github.png'>
    
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="重要资料 fatedier/frp - github
官方文档 | frp
司波图/自建内网穿透服务器 - 码云
$ tree /opt/frp /opt/frp ├── frpc ├── frpc_full.ini ├── frpc.ini ├── frps ├── frps_full.ini ├── frps.ini └── LICENSE 1.SSH访问内网机器 通过 SSH 访问内网机器 | frp
1.1.Server配置 在具有公网 IP 的机器上部署 frps，修改 frps.ini 文件，这里使用了最简化的配置，设置了 frp 服务器用户接收客户端连接的端口。
#/opt/frp/frps.ini [common] bind_port = 7000 # 注意：需要在云服务设置开放7000端口 # 身份验证(可选) token = i*RY2KI9^A7H # web界面 dashboard_port = 7500 # dashboard 用户名密码，可选，默认为空 dashboard_user = admin dashboard_pwd = admin 运行方式：/opt/frp/frps -c /opt/frp/frps." />
<meta name="keywords"
  content='blog, google analytics' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://devin0x01.github.io/post/linux%E8%BF%90%E7%BB%B4/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="frp内网穿透配置教程 - DEVIN&#39;s BLOG" />
<meta name="twitter:description"
  content="重要资料 fatedier/frp - github
官方文档 | frp
司波图/自建内网穿透服务器 - 码云
$ tree /opt/frp /opt/frp ├── frpc ├── frpc_full.ini ├── frpc.ini ├── frps ├── frps_full.ini ├── frps.ini └── LICENSE 1.SSH访问内网机器 通过 SSH 访问内网机器 | frp
1.1.Server配置 在具有公网 IP 的机器上部署 frps，修改 frps.ini 文件，这里使用了最简化的配置，设置了 frp 服务器用户接收客户端连接的端口。
#/opt/frp/frps.ini [common] bind_port = 7000 # 注意：需要在云服务设置开放7000端口 # 身份验证(可选) token = i*RY2KI9^A7H # web界面 dashboard_port = 7500 # dashboard 用户名密码，可选，默认为空 dashboard_user = admin dashboard_pwd = admin 运行方式：/opt/frp/frps -c /opt/frp/frps." />
<meta name="twitter:site" content="https://devin0x01.github.io" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://devin0x01.github.io">


<meta property="og:type" content="article" />
<meta property="og:title" content="frp内网穿透配置教程 - DEVIN&#39;s BLOG">
<meta property="og:description"
  content="重要资料 fatedier/frp - github
官方文档 | frp
司波图/自建内网穿透服务器 - 码云
$ tree /opt/frp /opt/frp ├── frpc ├── frpc_full.ini ├── frpc.ini ├── frps ├── frps_full.ini ├── frps.ini └── LICENSE 1.SSH访问内网机器 通过 SSH 访问内网机器 | frp
1.1.Server配置 在具有公网 IP 的机器上部署 frps，修改 frps.ini 文件，这里使用了最简化的配置，设置了 frp 服务器用户接收客户端连接的端口。
#/opt/frp/frps.ini [common] bind_port = 7000 # 注意：需要在云服务设置开放7000端口 # 身份验证(可选) token = i*RY2KI9^A7H # web界面 dashboard_port = 7500 # dashboard 用户名密码，可选，默认为空 dashboard_user = admin dashboard_pwd = admin 运行方式：/opt/frp/frps -c /opt/frp/frps." />
<meta property="og:url" content="https://devin0x01.github.io/post/linux%E8%BF%90%E7%BB%B4/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B/" />
<meta property="og:site_name" content="frp内网穿透配置教程" />
<meta property="og:image"
  content="https://devin0x01.github.io">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2023-08-04 16:05:25 &#43;0800 &#43;0800" />










</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://devin0x01.github.io">
        <svg class="octicon" height="32" viewBox="0 0 16 16" version="1.1" width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd"
            d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:https://devin0x01.github.io">
            </label>
          </form>
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://devin0x01.github.io">
        <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
          width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>
  
<div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://devin0x01.github.io">
                  <img class=" avatar-user"
                    src="https://devin0x01.github.io/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://devin0x01.github.io">DEVIN</a></span><span
                    class="path-divider">/</span><strong class="css-truncate-target mr-1" style="max-width: 410px"><a
                      href="https://devin0x01.github.io/post/linux%E8%BF%90%E7%BB%B4/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B/">frp内网穿透配置教程</a></strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Fri, 04 Aug 2023 16:05:25 &#43;0800"
                    class="no-wrap">
                    Fri, 04 Aug 2023 16:05:25 &#43;0800</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Tue, 29 Aug 2023 15:29:29 &#43;0000"
                    class="no-wrap">
                    Tue, 29 Aug 2023 15:29:29 &#43;0000</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      939 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                    
                    <a class="muted-link mr-3" href="/tags/linux%E8%BF%90%E7%BB%B4">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      Linux运维
                    </a>
                    
                    <a class="muted-link mr-3" href="/tags/frp">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      frp
                    </a>
                    
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><h1 id="重要资料">重要资料</h1>
<p><a href="https://github.com/fatedier/frp">fatedier/frp - github</a><br>
<a href="https://gofrp.org/docs/">官方文档 | frp</a><br>
<a href="https://gitee.com/spoto/natserver">司波图/自建内网穿透服务器 - 码云</a></p>
<pre tabindex="0"><code>$ tree /opt/frp
/opt/frp
├── frpc
├── frpc_full.ini
├── frpc.ini
├── frps
├── frps_full.ini
├── frps.ini
└── LICENSE
</code></pre><h1 id="1ssh访问内网机器">1.SSH访问内网机器</h1>
<p><a href="https://gofrp.org/docs/examples/ssh/">通过 SSH 访问内网机器 | frp</a></p>
<h2 id="11server配置">1.1.Server配置</h2>
<p>在具有公网 IP 的机器上部署 frps，修改 frps.ini 文件，这里使用了最简化的配置，设置了 frp 服务器用户接收客户端连接的端口。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="c1">#/opt/frp/frps.ini</span>
</span></span><span class="line"><span class="cl"><span class="k">[common]</span>
</span></span><span class="line"><span class="cl"><span class="na">bind_port</span> <span class="o">=</span> <span class="s">7000 # 注意：需要在云服务设置开放7000端口</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 身份验证(可选)</span>
</span></span><span class="line"><span class="cl"><span class="na">token</span> <span class="o">=</span> <span class="s">i*RY2KI9^A7H</span>
</span></span><span class="line"><span class="cl"><span class="c1"># web界面</span>
</span></span><span class="line"><span class="cl"><span class="na">dashboard_port</span> <span class="o">=</span> <span class="s">7500</span>
</span></span><span class="line"><span class="cl"><span class="c1"># dashboard 用户名密码，可选，默认为空</span>
</span></span><span class="line"><span class="cl"><span class="na">dashboard_user</span> <span class="o">=</span> <span class="s">admin</span>
</span></span><span class="line"><span class="cl"><span class="na">dashboard_pwd</span> <span class="o">=</span> <span class="s">admin</span>
</span></span></code></pre></div><p>运行方式：<code>/opt/frp/frps -c /opt/frp/frps.ini</code></p>
<h2 id="12client配置">1.2.Client配置</h2>
<p>在需要被访问的内网机器上（SSH 服务通常监听在 22 端口）部署 frpc，修改 frpc.ini 文件，假设 frps 所在服务器的公网 IP 为 x.x.x.x。<br>
local_ip 和 local_port 配置为本地需要暴露到公网的服务地址和端口。remote_port 表示在 frp 服务端监听的端口，访问此端口的流量将会被转发到本地服务对应的端口。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="c1">#/opt/frp/frpc.ini</span>
</span></span><span class="line"><span class="cl"><span class="k">[common]</span>
</span></span><span class="line"><span class="cl"><span class="na">server_addr</span> <span class="o">=</span> <span class="s">x.x.x.x</span>
</span></span><span class="line"><span class="cl"><span class="na">server_port</span> <span class="o">=</span> <span class="s">7000</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 身份验证(可选)</span>
</span></span><span class="line"><span class="cl"><span class="na">token</span> <span class="o">=</span> <span class="s">i*RY2KI9^A7H</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">[ssh]</span>
</span></span><span class="line"><span class="cl"><span class="na">type</span> <span class="o">=</span> <span class="s">tcp</span>
</span></span><span class="line"><span class="cl"><span class="na">local_ip</span> <span class="o">=</span> <span class="s">127.0.0.1</span>
</span></span><span class="line"><span class="cl"><span class="na">local_port</span> <span class="o">=</span> <span class="s">22</span>
</span></span><span class="line"><span class="cl"><span class="na">remote_port</span> <span class="o">=</span> <span class="s">6000 # 注意：需要在云服务器上开放6000端口</span>
</span></span></code></pre></div><p>运行方式：<code>/opt/frp/frpc -c /opt/frp/frpc.ini</code><br>
访问内网机器的方式：<code>ssh -p 6000 test@x.x.x.x</code></p>
<p>注意：不要使用后台方式运行，<code>nohup /opt/frp/frpc -c /opt/frp/frpc.ini 2&gt;&amp;1 &amp;</code>
，否则下次连接可能会遇到以下报错：<a href="https://blog.csdn.net/wzying25/article/details/105482746">frp错误，frp报错，[ssh] start error: proxy name [ssh] is already in use_狗狗25的博客-CSDN博客</a></p>
<h2 id="13设置frps开机自启动">1.3.设置frps开机自启动</h2>
<p><a href="https://gofrp.org/docs/setup/systemd/">使用 systemd | frp</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="na">$ sudo vim /etc/systemd/system/frps.service</span>
</span></span><span class="line"><span class="cl"><span class="na">$ systemctl cat frps</span>
</span></span><span class="line"><span class="cl"><span class="c1"># /etc/systemd/system/frps.service</span>
</span></span><span class="line"><span class="cl"><span class="k">[Unit]</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 服务名称，可自定义</span>
</span></span><span class="line"><span class="cl"><span class="na">Description</span> <span class="o">=</span> <span class="s">frp server</span>
</span></span><span class="line"><span class="cl"><span class="na">After</span> <span class="o">=</span> <span class="s">network.target syslog.target</span>
</span></span><span class="line"><span class="cl"><span class="na">Wants</span> <span class="o">=</span> <span class="s">network.target</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">[Service]</span>
</span></span><span class="line"><span class="cl"><span class="na">Type</span> <span class="o">=</span> <span class="s">simple</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 启动frps的命令，需修改为您的frps的安装路径</span>
</span></span><span class="line"><span class="cl"><span class="na">ExecStart</span> <span class="o">=</span> <span class="s">/opt/frp/frps -c /opt/frp/frps.ini</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">[Install]</span>
</span></span><span class="line"><span class="cl"><span class="na">WantedBy</span> <span class="o">=</span> <span class="s">multi-user.target</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 配置 frps 开机自启</span>
</span></span><span class="line"><span class="cl">systemctl <span class="nb">enable</span> frps
</span></span><span class="line"><span class="cl"><span class="c1"># 启动frp</span>
</span></span><span class="line"><span class="cl">systemctl start frps
</span></span><span class="line"><span class="cl"><span class="c1"># 停止frp</span>
</span></span><span class="line"><span class="cl">systemctl stop frps
</span></span><span class="line"><span class="cl"><span class="c1"># 重启frp</span>
</span></span><span class="line"><span class="cl">systemctl restart frps
</span></span><span class="line"><span class="cl"><span class="c1"># 查看frp状态</span>
</span></span><span class="line"><span class="cl">systemctl status frps
</span></span></code></pre></div><h2 id="14设置frpc开机自启动">1.4.设置frpc开机自启动</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ sudo systemctl cat frpc
</span></span><span class="line"><span class="cl"><span class="c1"># /etc/systemd/system/frpc.service</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>Unit<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 服务名称，可自定义</span>
</span></span><span class="line"><span class="cl"><span class="nv">Description</span> <span class="o">=</span> frp client
</span></span><span class="line"><span class="cl"><span class="nv">After</span> <span class="o">=</span> network.target syslog.target
</span></span><span class="line"><span class="cl"><span class="nv">Wants</span> <span class="o">=</span> network.target
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Service<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Type</span> <span class="o">=</span> simple
</span></span><span class="line"><span class="cl"><span class="c1"># 启动frps的命令，需修改为您的frps的安装路径</span>
</span></span><span class="line"><span class="cl"><span class="nv">ExecStartPre</span> <span class="o">=</span> /bin/sleep <span class="m">10</span>
</span></span><span class="line"><span class="cl"><span class="nv">ExecStart</span> <span class="o">=</span> /opt/frp/frpc -c /opt/frp/frpc.ini
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Install<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">WantedBy</span> <span class="o">=</span> multi-user.target
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ systemctl get-default
</span></span><span class="line"><span class="cl">graphical.target
</span></span><span class="line"><span class="cl">$ <span class="nb">cd</span> /etc/systemd/system
</span></span><span class="line"><span class="cl">$ sudo vim frpc.service
</span></span><span class="line"><span class="cl">$ sudo systemctl <span class="nb">enable</span> frpc
</span></span><span class="line"><span class="cl">Created symlink /etc/systemd/system/multi-user.target.wants/frpc.service → /etc/systemd/system/frpc.service.
</span></span><span class="line"><span class="cl">$ sudo systemctl status frpc
</span></span><span class="line"><span class="cl">● frpc.service - frp client
</span></span><span class="line"><span class="cl">   Loaded: loaded <span class="o">(</span>/etc/systemd/system/frpc.service<span class="p">;</span> enabled<span class="p">;</span> vendor preset: enabled<span class="o">)</span>
</span></span><span class="line"><span class="cl">   Active: inactive <span class="o">(</span>dead<span class="o">)</span>
</span></span><span class="line"><span class="cl">$ sudo systemctl restart frpc
</span></span><span class="line"><span class="cl">$ sudo systemctl status frpc
</span></span><span class="line"><span class="cl">● frpc.service - frp client
</span></span><span class="line"><span class="cl">   Loaded: loaded <span class="o">(</span>/etc/systemd/system/frpc.service<span class="p">;</span> enabled<span class="p">;</span> vendor preset: enabled<span class="o">)</span>
</span></span><span class="line"><span class="cl">   Active: active <span class="o">(</span>running<span class="o">)</span> since Sun 2023-08-06 05:13:52 UTC<span class="p">;</span> 8s ago
</span></span><span class="line"><span class="cl"> Main PID: <span class="m">1361</span> <span class="o">(</span>frpc<span class="o">)</span>
</span></span><span class="line"><span class="cl">   CGroup: /system.slice/frpc.service
</span></span><span class="line"><span class="cl">           └─1361 /opt/frp/frpc -c /opt/frp/frpc.ini
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Aug <span class="m">06</span> 05:13:52 firefly systemd<span class="o">[</span>1<span class="o">]</span>: Started frp client.
</span></span><span class="line"><span class="cl">Aug <span class="m">06</span> 05:13:52 firefly frpc<span class="o">[</span>1361<span class="o">]</span>: 2023/08/06 05:13:52 <span class="o">[</span>I<span class="o">]</span> <span class="o">[</span>root.go:220<span class="o">]</span> start frpc service <span class="k">for</span> config file <span class="o">[</span>/opt/frp/frpc.ini<span class="o">]</span>
</span></span><span class="line"><span class="cl">Aug <span class="m">06</span> 05:13:53 firefly frpc<span class="o">[</span>1361<span class="o">]</span>: 2023/08/06 05:13:53 <span class="o">[</span>I<span class="o">]</span> <span class="o">[</span>service.go:301<span class="o">]</span> <span class="o">[</span>f8d3384fbb8c1471<span class="o">]</span> login to server success, get run id <span class="o">[</span>f8d3384fbb8c1471<span class="o">]</span>
</span></span><span class="line"><span class="cl">Aug <span class="m">06</span> 05:13:53 firefly frpc<span class="o">[</span>1361<span class="o">]</span>: 2023/08/06 05:13:53 <span class="o">[</span>I<span class="o">]</span> <span class="o">[</span>proxy_manager.go:150<span class="o">]</span> <span class="o">[</span>f8d3384fbb8c1471<span class="o">]</span> proxy added: <span class="o">[</span>ssh<span class="o">]</span>
</span></span><span class="line"><span class="cl">Aug <span class="m">06</span> 05:13:53 firefly frpc<span class="o">[</span>1361<span class="o">]</span>: 2023/08/06 05:13:53 <span class="o">[</span>I<span class="o">]</span> <span class="o">[</span>control.go:172<span class="o">]</span> <span class="o">[</span>f8d3384fbb8c1471<span class="o">]</span> <span class="o">[</span>ssh<span class="o">]</span> start proxy success
</span></span></code></pre></div></article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='https://devin0x01.github.io/js/toc.js'></script>
<link rel="stylesheet" href='https://devin0x01.github.io/css/toc.css' />


  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://devin0x01.github.io">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://devin0x01.github.io/js/github-style.js"></script>




</html>